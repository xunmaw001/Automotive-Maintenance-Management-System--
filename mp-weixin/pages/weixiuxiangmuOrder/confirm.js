(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/weixiuxiangmuOrder/confirm"],{"0084":function(e,n,t){"use strict";var i=t("60db"),r=t.n(i);r.a},"502f":function(e,n,t){"use strict";t.r(n);var i=t("7a56"),r=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=r.a},"60db":function(e,n,t){},"7a56":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n,t,i,r,a,u){try{var o=e[a](u),c=o.value}catch(s){return void t(s)}o.done?n(c):Promise.resolve(c).then(i,r)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(i,r){var u=e.apply(n,t);function o(e){a(u,i,r,o,c,"next",e)}function c(e){a(u,i,r,o,c,"throw",e)}o(void 0)}))}}var o={data:function(){return{user:{},orderGoods:[],maxNewMouey:0,cheliangOptions:[],cheliangId:null,weixiuxiangmuOrderTime:null,weixiuxiangmuOrderPaymentTypes:1,weixiuxiangmuOrderValue:null,ptions:[],cheliangIndex:0,zhi:[{id:1,val:"余额"},{id:2,val:"积分"}],zhekou:1}},onLoad:function(n){var t=this;return u(i.default.mark((function n(){var r,a,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.orderGoods=e.getStorageSync("orderGoods"),t.orderGoods.length>0)for(r=0;r<t.orderGoods.length;r++)t.maxNewMouey=t.maxNewMouey+parseFloat(t.orderGoods[r].weixiuxiangmuNewMoney)*t.orderGoods[r].buyNumber;return a={page:1,limit:100,yonghuId:t.user.id},n.next=5,t.$api.page("cheliang",a);case 5:u=n.sent,t.cheliangOptions=u.data.list,e.removeStorageSync("orderGoods");case 8:case"end":return n.stop()}}),n)})))()},onShow:function(){var n=this;return u(i.default.mark((function t(){var r,a,u,o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,a=e.getStorageSync("nowTable"),t.next=4,r.$api.session(a);case 4:return u=t.sent,r.user=u.data,t.next=8,r.$api.page("dictionary",{dicCode:"huiyuandengji_types",dicName:"会员等级类型",codeIndexStart:r.user.huiyuandengjiTypes,codeIndexEnd:r.user.huiyuandengjiTypes});case 8:o=t.sent,o.data.list.length>0&&(r.zhekou=o.data.list[0].beizhu);case 10:case"end":return t.stop()}}),t)})))()},methods:{cheliangChange:function(e){this.cheliangIndex=e.target.value,this.weixiuxiangmuOrderValue=this.cheliangOptions[this.cheliangIndex].cheliangUuidNumber,this.cheliangId=this.cheliangOptions[this.cheliangIndex].id},weixiuxiangmuOrderTimeConfirm:function(e){console.log(e),this.weixiuxiangmuOrderTime=e.result,this.$forceUpdate()},toggleTab:function(e){this.$refs[e].show()},onSubmitTap:function(){var n=this;return u(i.default.mark((function t(){var r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=n,e.getStorageSync("nowTable"),e.showModal({title:"提示",content:"是否确认支付",success:function(){var e=u(i.default.mark((function e(n){var t;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.confirm){e.next=11;break}if(null!=r.cheliangId){e.next=4;break}return r.$utils.msg("请选择需要维修的车辆"),e.abrupt("return");case 4:if(null!=r.weixiuxiangmuOrderTime){e.next=7;break}return r.$utils.msg("请选择预定时间"),e.abrupt("return");case 7:return t={weixiuxiangmuId:r.orderGoods[0].weixiuxiangmuId,yonghuId:r.user.id,cheliangId:r.cheliangId,weixiuxiangmuOrderTime:r.weixiuxiangmuOrderTime,weixiuxiangmuOrderPaymentTypes:r.weixiuxiangmuOrderPaymentTypes},e.next=10,r.$api.add("weixiuxiangmuOrder",t);case 10:r.$utils.jump("/pages/weixiuxiangmuOrder/list");case 11:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()});case 3:case"end":return t.stop()}}),t)})))()}}};n.default=o}).call(this,t("543d")["default"])},"8b7e":function(e,n,t){"use strict";t.r(n);var i=t("a0f9"),r=t("502f");for(var a in r)"default"!==a&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("0084");var u,o=t("f0c5"),c=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);n["default"]=c.exports},a0f9:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var i={wPicker:function(){return Promise.all([t.e("common/vendor"),t.e("components/w-picker/w-picker")]).then(t.bind(null,"b7aa"))}},r=function(){var e=this,n=e.$createElement,t=(e._self._c,1==e.weixiuxiangmuOrderPaymentTypes?e.maxNewMouey.toFixed(2):null);e.$mp.data=Object.assign({},{$root:{g0:t}})},a=[]},ac8b:function(e,n,t){"use strict";(function(e){t("48e8");i(t("66fd"));var n=i(t("8b7e"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])}},[["ac8b","common/runtime","common/vendor"]]]);